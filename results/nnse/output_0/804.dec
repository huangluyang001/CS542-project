after a marathon stretch of late-night negotiations in lausanne , switzerland , diplomats announced they 'd come up with the framework for an agreement that 's been months in the making .